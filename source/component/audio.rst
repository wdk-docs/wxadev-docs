
.. _audio:

:wx_comp:`audio ğŸ—‘ <audio>`
============================================================

.. versionadded::  1.0.0 ä½ç‰ˆæœ¬éœ€åš :ref:`compatibility` ã€‚

.. deprecated:: 1.6.0 å»ºè®®ä½¿ç”¨èƒ½åŠ›æ›´å¼ºçš„ :func:`wx.createInnerAudioContext` æ¥å£

+----------------+-------------+----------+------+----------------------------------------+----------+
|      å±æ€§      |    ç±»å‹     |  é»˜è®¤å€¼  | å¿…å¡« |                  è¯´æ˜                  | æœ€ä½ç‰ˆæœ¬ |
+================+=============+==========+======+========================================+==========+
| id             | string      |          | å¦   | audio ç»„ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦                 | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| src            | string      |          | å¦   | è¦æ’­æ”¾éŸ³é¢‘çš„èµ„æºåœ°å€                   | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| loop           | boolean     | false    | å¦   | æ˜¯å¦å¾ªç¯æ’­æ”¾                           | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| controls       | boolean     | false    | å¦   | æ˜¯å¦æ˜¾ç¤ºé»˜è®¤æ§ä»¶                       | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| poster         | string      |          | å¦   | é»˜è®¤æ§ä»¶ä¸Šçš„éŸ³é¢‘å°é¢çš„å›¾ç‰‡èµ„æºåœ°å€ï¼Œ   |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | å¦‚æœ controls å±æ€§å€¼ä¸º false           |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | åˆ™è®¾ç½® poster æ— æ•ˆ                     | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| name           | string      | æœªçŸ¥éŸ³é¢‘ | å¦   | é»˜è®¤æ§ä»¶ä¸Šçš„éŸ³é¢‘åå­—ï¼Œ                 |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | å¦‚æœ controls å±æ€§å€¼ä¸º                 |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | false åˆ™è®¾ç½® name æ— æ•ˆ                 | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| author         | string      | æœªçŸ¥ä½œè€… | å¦   | é»˜è®¤æ§ä»¶ä¸Šçš„ä½œè€…åå­—ï¼Œ                 |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | å¦‚æœ controls å±æ€§å€¼ä¸º                 |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | false åˆ™è®¾ç½® author æ— æ•ˆ               | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| binderror      | eventhandle |          | å¦   | å½“å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ error äº‹ä»¶ï¼Œ          |          |
|----------------|-------------|----------|------|----------------------------------------+----------+
|                |             |          |      | detail = {errMsg:MediaError.code}      | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| bindplay       | eventhandle |          | å¦   | å½“å¼€å§‹/ç»§ç»­æ’­æ”¾æ—¶è§¦å‘playäº‹ä»¶          | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| bindpause      | eventhandle |          | å¦   | å½“æš‚åœæ’­æ”¾æ—¶è§¦å‘ pause äº‹ä»¶            | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| bindtimeupdate | eventhandle |          | å¦   | å½“æ’­æ”¾è¿›åº¦æ”¹å˜æ—¶è§¦å‘ timeupdate äº‹ä»¶ï¼Œ |          |
|----------------|-------------|----------|------|----------------------------------------|----------+
|                |             |          |      | detail = {currentTime, duration}       | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+
| bindended      | eventhandle |          | å¦   | å½“æ’­æ”¾åˆ°æœ«å°¾æ—¶è§¦å‘ ended äº‹ä»¶          | 1.0.0    |
+----------------+-------------+----------+------+----------------------------------------+----------+

MediaError.code

==========  ==================
è¿”å›é”™è¯¯ç          æè¿°
==========  ==================
1           è·å–èµ„æºè¢«ç”¨æˆ·ç¦æ­¢
2           ç½‘ç»œé”™è¯¯
3           è§£ç é”™è¯¯
4           ä¸åˆé€‚èµ„æº
==========  ==================

ç¤ºä¾‹ä»£ç  åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ

.. code:: html

  <!-- audio.wxml -->
  <audio
    poster="{{poster}}"
    name="{{name}}"
    author="{{author}}"
    src="{{src}}"
    id="myAudio"
    controls
    loop
  ></audio>

  <button type="primary" bindtap="audioPlay">æ’­æ”¾</button>
  <button type="primary" bindtap="audioPause">æš‚åœ</button>
  <button type="primary" bindtap="audio14">è®¾ç½®å½“å‰æ’­æ”¾æ—¶é—´ä¸º14ç§’</button>
  <button type="primary" bindtap="audioStart">å›åˆ°å¼€å¤´</button>

.. code:: js

  // audio.js
  Page({
    onReady(e) {
      // ä½¿ç”¨ wx.createAudioContext è·å– audio ä¸Šä¸‹æ–‡ context
      this.audioCtx = wx.createAudioContext('myAudio')
    },
    data: {
      poster: 'http://y.gtimg.cn/music/photo_new/T002R300x300M000003rsKF44GyaSk.jpg?max_age=2592000',
      name: 'æ­¤æ—¶æ­¤åˆ»',
      author: 'è®¸å·',
      src: 'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&uin=346897220& vkey=6292F51E1E384E06DCBDC9AB7C49FD713D632D313AC4858BACB8DDD29067D3C601481D36E62053BF8DFEAF74C0A5CCFADD6471160CAF3E  6A&fromtag=46',
    },
    audioPlay() {
      this.audioCtx.play()
    },
    audioPause() {
      this.audioCtx.pause()
    },
    audio14() {
      this.audioCtx.seek(14)
    },
    audioStart() {
      this.audioCtx.seek(0)
    }
  })


ç›¸å…³apiï¼š :wxapi:`wx.createAudioContext`
