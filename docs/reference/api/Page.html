

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>页面(page) &mdash; wxadev 1.0.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="获取当前页面栈(getCurrentPages)" href="getCurrentPages.html" />
    <link rel="prev" title="获取到小程序全局唯一的 App 实例(getApp)" href="getApp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../contents.html" class="icon icon-home"> wxadev
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic/index.html">基础教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">运行环境</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../framework/index.html">框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../component/index.html">组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-backend/index.html">服务端API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">开发工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">参考资料</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">小程序配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene.html">场景值列表</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">框架接口说明</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#app">小程序 App</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#id2">页面</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">页面(page)</a></li>
<li class="toctree-l4"><a class="reference internal" href="getCurrentPages.html">获取当前页面栈(getCurrentPages)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id3">自定义组件</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id4">其它</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../wxcloud/index.html">云开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wxwork/index.html">企业微信</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst.html">定义</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">wxadev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">参考资料</a> &raquo;</li>
        
          <li><a href="index.html">框架接口说明</a> &raquo;</li>
        
      <li>页面(page)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/api/Page.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="page">
<h1><a class="reference external" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">页面(page)</a><a class="headerlink" href="#page" title="永久链接至标题">¶</a></h1>
<dl class="class">
<dt id="Page">
<em class="property">class </em><code class="descname">Page</code><span class="sig-paren">(</span><em>{data</em>, <em>onLoad</em>, <em>onShow</em>, <em>onReady</em>, <em>onHide</em>, <em>onUnload</em>, <em>onPullDownRefresh</em>, <em>onReachBottom</em>, <em>onShareAppMessage</em>, <em>onPageScroll</em>, <em>onResize</em>, <em>onTabItemTap}</em><span class="sig-paren">)</span><a class="headerlink" href="#Page" title="永久链接至目标">¶</a></dt>
<dd><p>注册小程序中的一个页面。接受一个 Object 类型参数，其指定页面的初始数据、生命周期回调、事件处理函数等。</p>
<dl class="field-list">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Object</em>) – <p>页面第一次渲染使用的初始数据。
页面加载时，data 将会以JSON字符串的形式由逻辑层传至渲染层，
因此data中的数据必须是可以转成JSON的类型：字符串，数字，布尔值，对象，数组。
渲染层可以通过 WXML 对数据进行绑定。</p>
<p>示例代码： :<a class="reference download external" download="" href="https://developers.weixin.qq.com/s/2PeBsKmn6EZ9"><code class="xref download docutils literal notranslate"><span class="pre">在开发者工具中预览效果</span></code></a></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{array[0].msg}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span><span class="p">,</span>
    <span class="nx">array</span><span class="o">:</span> <span class="p">[{</span><span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;2&#39;</span><span class="p">}]</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</p></li>
<li><p><strong>onLoad(query)</strong> (<em>function</em>) – <p><strong>生命周期回调函数</strong> — 监听页面加载, 页面加载时触发。
一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数。</p>
<ul>
<li><p><strong>query</strong> (<em>Object</em>) -    打开当前页面路径中的参数</p></li>
</ul>
</p></li>
<li><p><strong>onShow</strong> (<em>function</em>) – <strong>生命周期回调函数</strong> — 监听页面显示,页面显示/切入前台时触发。</p></li>
<li><p><strong>onReady</strong> (<em>function</em>) – <p><strong>生命周期回调函数</strong> — 监听页面初次渲染完成, 页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>对界面内容进行设置的 API 如 <code class="xref js js-func docutils literal notranslate"><span class="pre">wx.setNavigationBarTitle()</span></code> ，请在onReady之后进行。详见生命周期</p>
</div>
</p></li>
<li><p><strong>onHide</strong> (<em>function</em>) – <strong>生命周期回调函数</strong> — 监听页面隐藏, 页面隐藏/切入后台时触发。 如 <code class="xref js js-func docutils literal notranslate"><span class="pre">wx.navigateTo()</span></code> 或底部 tab 切换到其他页面，小程序切入后台等。</p></li>
<li><p><strong>onUnload</strong> (<em>function</em>) – <strong>生命周期回调函数</strong> — 监听页面卸载, 页面卸载时触发。如 <code class="xref js js-func docutils literal notranslate"><span class="pre">wx.redirectTo()</span></code> 或 <code class="xref js js-func docutils literal notranslate"><span class="pre">wx.navigateBack()</span></code> 到其他页面时。</p></li>
<li><p><strong>onPullDownRefresh</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 监听用户下拉动作刷新事件。</p>
<ul>
<li><p>需要在 <code class="docutils literal notranslate"><span class="pre">app.json</span></code> 的 window 选项中或页面配置中开启 <code class="xref js js-data docutils literal notranslate"><span class="pre">enablePullDownRefresh</span></code> 。</p></li>
<li><p>可以通过 <code class="xref js js-func docutils literal notranslate"><span class="pre">wx.startPullDownRefresh()</span></code> 触发下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。</p></li>
<li><p>当处理完数据刷新后，<code class="xref js js-func docutils literal notranslate"><span class="pre">wx.stopPullDownRefresh()</span></code> 可以停止当前页面的下拉刷新。</p></li>
</ul>
</p></li>
<li><p><strong>onReachBottom</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 监听用户上拉触底事件。</p>
<ul>
<li><p>可以在 <code class="docutils literal notranslate"><span class="pre">app.json</span></code> 的 window 选项中或页面配置中设置触发距离 <code class="xref js js-data docutils literal notranslate"><span class="pre">onReachBottomDistance</span></code> 。</p></li>
<li><p>在触发距离内滑动期间，本事件只会被触发一次。</p></li>
</ul>
</p></li>
<li><p><strong>onShareAppMessage({from,target,webViewUrl})</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 用户点击右上角转发,监听用户点击页面内转发按钮（<a class="reference internal" href="../../component/button.html#button"><span class="std std-ref">&lt;button&gt;</span></a> 组件 <code class="docutils literal notranslate"><span class="pre">open-type=&quot;share&quot;</span></code>）或右上角菜单“转发”按钮的行为，并自定义转发内容。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮</p>
</div>
<ul>
<li><p><strong>from</strong>  (<em>String</em>) -    转发事件来源。button：页面内转发按钮；menu：右上角转发菜单      1.2.4</p></li>
<li><p><strong>target</strong>        (<em>Object</em>) -    如果 from 值是 button，则 target 是触发这次转发事件的 button，否则为 undefined      1.2.4</p></li>
<li><p><strong>webViewUrl</strong>    (<em>String</em>) -    页面中包含&lt;web-view&gt;组件时，返回当前&lt;web-view&gt;的url   1.6.4</p></li>
</ul>
<p>此事件处理函数需要 return 一个 Object，用于自定义转发内容，返回内容如下:</p>
<ul>
<li><p><strong>title</strong> 转发标题    当前小程序名称</p></li>
<li><p><strong>path</strong>  转发路径    当前页面 path ，必须是以 / 开头的完整路径</p></li>
<li><p><strong>imageUrl</strong>      自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径。支持PNG及JPG。显示图片长宽比是 5:4。       使用默认截图  1.5.0</p></li>
</ul>
<dl class="field-list">
<dt class="field-odd">示例</dt>
<dd class="field-odd"><p><a class="reference download external" download="" href="https://developers.weixin.qq.com/s/mffqUKmr6fZU"><code class="xref download docutils literal notranslate"><span class="pre">在开发者工具中预览效果</span></code></a></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onShareAppMessage</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">from</span> <span class="o">===</span> <span class="s1">&#39;button&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 来自页面内转发按钮</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;自定义转发标题&#39;</span><span class="p">,</span>
      <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/page/user?id=123&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</p></li>
<li><p><strong>onPageScroll({scrollTop})</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 监听用户滑动页面事件。</p>
<ul>
<li><p><strong>scrollTop</strong>     (<em>Number</em>) -    页面在垂直方向已滚动的距离（单位px）</p></li>
</ul>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>请只在需要的时候才在 page 中定义此方法，不要定义空方法。
以减少不必要的事件派发对渲染层-逻辑层通信的影响。</p>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>请避免在 onPageScroll 中过于频繁的执行 setData 等引起逻辑层-渲染层通信的操作。
尤其是每次传输大量数据，会影响通信耗时。</p>
</div>
</p></li>
<li><p><strong>onResize</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 页面尺寸改变时触发，详见 响应显示区域变化</p>
<div class="versionadded">
<p><span class="versionmodified added">2.4.0 新版功能: </span>低版本需做兼容处理。</p>
</div>
<p>小程序屏幕旋转时触发。详见 响应显示区域变化</p>
</p></li>
<li><p><strong>onTabItemTap({index, pagePath, text})</strong> (<em>function</em>) – <p><strong>页面事件处理函数</strong> - 点击 tab 时触发</p>
<div class="versionadded">
<p><span class="versionmodified added">1.9.0 新版功能: </span>低版本需做兼容处理。</p>
</div>
<ul>
<li><p><strong>index</strong> (<em>String</em>) -    被点击tabItem的序号，从0开始</p></li>
<li><p><strong>pagePath</strong>      (<em>String</em>) -    被点击tabItem的页面路径</p></li>
<li><p><strong>text</strong>  (<em>String</em>) -    被点击tabItem的按钮文字</p></li>
</ul>
<dl class="field-list">
<dt class="field-odd">示例</dt>
<dd class="field-odd"><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onTabItemTap</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pagePath</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</p></li>
<li><p><strong>tapFunc</strong> (<em>function</em>) – <p><strong>组件事件处理函数</strong> - Page 中还可以定义组件事件处理函数。在渲染层的组件中加入事件绑定，当事件被触发时，就会执行 Page 中定义的事件处理函数。</p>
<dl class="field-list">
<dt class="field-odd">示例</dt>
<dd class="field-odd"><p><a class="reference download external" download="" href="https://developers.weixin.qq.com/s/vUf6fKmX64Zn"><code class="xref download docutils literal notranslate"><span class="pre">在开发者工具中预览效果</span></code></a></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">view</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;viewTap&quot;</span><span class="p">&gt;</span>click me<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">viewTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;view tap&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</p></li>
<li><p><strong>其他</strong> (<em>any</em>) – 开发者可以添加任意的函数或数据到 Object 参数中，在页面的函数中用 this 可以访问</p></li>
</ul>
</dd>
<dt class="field-even">示例</dt>
<dd class="field-even"><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// index.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;This is page data.&#39;</span>
  <span class="p">},</span>
  <span class="nx">onLoad</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do some initialize when page load.</span>
  <span class="p">},</span>
  <span class="nx">onReady</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page ready.</span>
  <span class="p">},</span>
  <span class="nx">onShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page show.</span>
  <span class="p">},</span>
  <span class="nx">onHide</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page hide.</span>
  <span class="p">},</span>
  <span class="nx">onUnload</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page close.</span>
  <span class="p">},</span>
  <span class="nx">onPullDownRefresh</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when pull down.</span>
  <span class="p">},</span>
  <span class="nx">onReachBottom</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page reach bottom.</span>
  <span class="p">},</span>
  <span class="nx">onShareAppMessage</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// return custom share data when user share.</span>
  <span class="p">},</span>
  <span class="nx">onPageScroll</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page scroll</span>
  <span class="p">},</span>
  <span class="nx">onResize</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page resize</span>
  <span class="p">},</span>
  <span class="nx">onTabItemTap</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pagePath</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="c1">// Event handler.</span>
  <span class="nx">viewTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Set some data for updating view.&#39;</span>
    <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this is setData callback</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">customData</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">hi</span><span class="o">:</span> <span class="s1">&#39;MINA&#39;</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="Page.route">
<code class="descclassname">Page.</code><code class="descname">route</code><a class="headerlink" href="#Page.route" title="永久链接至目标">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">1.2.0 新版功能: </span>低版本需做兼容处理。</p>
</div>
<p>到当前页面的路径，类型为String。</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="Page.prototype.setData">
<code class="descclassname">Page.prototype.</code><code class="descname">setData</code><span class="sig-paren">(</span><em>data</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Page.prototype.setData" title="永久链接至目标">¶</a></dt>
<dd><p>setData 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 this.data 的值（同步）。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>object</em>) – <p>要改变的数据,
以 <em>key:value</em> 的形式表示，将 <em>this.data</em> 中的 <em>key</em> 对应的值改变成 <em>value。</em></p>
<p>其中 key 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如 <em>array[2].message</em>，<em>a.b.c.d</em>，并且不需要在 <em>this.data</em> 中预先定义。</p>
</p></li>
<li><p><strong>callback</strong> (<em>Function</em>) – <p>setData引起的界面更新渲染完毕后的回调函数</p>
<div class="versionadded">
<p><span class="versionmodified added">1.5.0 新版功能.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致。</p></li>
<li><p>仅支持设置可 JSON 化的数据。</p></li>
<li><p>单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。</p></li>
<li><p>请不要把 data 中任何一项的 value 设为 undefined ，否则这一项将不被设置并可能遗留一些潜在问题。</p></li>
</ul>
</div>
<dl class="field-list">
<dt class="field-odd">示例</dt>
<dd class="field-odd"><p><a class="reference download external" download="" href="https://developers.weixin.qq.com/s/HofnzKmb6fZe"><code class="xref download docutils literal notranslate"><span class="pre">在开发者工具中预览效果</span></code></a></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!--index.wxml--&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeText&quot;</span><span class="p">&gt;</span>Change normal data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{num}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeNum&quot;</span><span class="p">&gt;</span>Change normal num<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{array[0].text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeItemInArray&quot;</span><span class="p">&gt;</span>Change Array data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{object.text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeItemInObject&quot;</span><span class="p">&gt;</span>Change Object data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{newField.text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;addNewField&quot;</span><span class="p">&gt;</span>Add new data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// index.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span><span class="p">,</span>
    <span class="nx">num</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">array</span><span class="o">:</span> <span class="p">[{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span><span class="p">}],</span>
    <span class="nx">object</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">changeText</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this.data.text = &#39;changed data&#39; // 不要直接修改 this.data</span>
    <span class="c1">// 应该使用 setData</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeNum</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 或者，可以修改 this.data 之后马上用 setData 设置一下修改了的字段</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">num</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">num</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">num</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeItemInArray</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 对于对象或数组字段，可以直接修改一个其下的子字段，这样做通常比修改整个对象或数组更好</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;array[0].text&#39;</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeItemInObject</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;object.text&#39;</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">addNewField</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;newField.text&#39;</span><span class="o">:</span> <span class="s1">&#39;new data&#39;</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getCurrentPages.html" class="btn btn-neutral float-right" title="获取当前页面栈(getCurrentPages)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getApp.html" class="btn btn-neutral float-left" title="获取到小程序全局唯一的 App 实例(getApp)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Nosy

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>