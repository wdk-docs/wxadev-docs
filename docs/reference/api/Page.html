

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>页面 &mdash; wxadev 1.0.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="模块" href="module.html" />
    <link rel="prev" title="小程序 App" href="app.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../contents.html" class="icon icon-home"> wxadev
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dev.html">小程序简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic/index.html">基础教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../framework/index.html">框架开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">运行环境</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../component/index.html">组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">开发工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">参考资料</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">小程序配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-list.html">场景值列表</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">框架接口</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app.html">小程序 App</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">页面</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#page-object-object">Page(Object object)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pageobject-getcurrentpages">PageObject[] getCurrentPages()</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="module.html">模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="wx.html">wx.env</a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">console</a></li>
<li class="toctree-l3"><a class="reference internal" href="timer.html">定时器</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-backend/index.html">服务端开放接口</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">wxadev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">参考资料</a> &raquo;</li>
        
          <li><a href="index.html">框架接口</a> &raquo;</li>
        
      <li>页面</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/api/page.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>页面<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="page-object-object">
<h2>Page(Object object)<a class="headerlink" href="#page-object-object" title="永久链接至标题">¶</a></h2>
<p>注册小程序中的一个页面。接受一个 Object 类型参数，其指定页面的初始数据、生命周期回调、事件处理函数等。</p>
<p>参数</p>
<p>Object object</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 7%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>属性</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>默认值</p></th>
<th class="head"><p>必填</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>Object</p></td>
<td></td>
<td></td>
<td><p>页面的初始数据</p></td>
</tr>
<tr class="row-odd"><td><p>onLoad</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>生命周期回调—监听页面加载</p></td>
</tr>
<tr class="row-even"><td><p>onShow</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>生命周期回调—监听页面显示</p></td>
</tr>
<tr class="row-odd"><td><p>onReady</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>生命周期回调—监听页面初次渲染完成</p></td>
</tr>
<tr class="row-even"><td><p>onHide</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>生命周期回调—监听页面隐藏</p></td>
</tr>
<tr class="row-odd"><td><p>onUnload</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>生命周期回调—监听页面卸载</p></td>
</tr>
<tr class="row-even"><td><p>onPullDownRefresh</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>监听用户下拉动作</p></td>
</tr>
<tr class="row-odd"><td><p>onReachBottom</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>页面上拉触底事件的处理函数</p></td>
</tr>
<tr class="row-even"><td><p>onShareAppMessage</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>用户点击右上角转发</p></td>
</tr>
<tr class="row-odd"><td><p>onPageScroll</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>页面滚动触发事件的处理函数</p></td>
</tr>
<tr class="row-even"><td><p>onResize</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>页面尺寸改变时触发，详见 响应显示区域变化</p></td>
</tr>
<tr class="row-odd"><td><p>onTabItemTap</p></td>
<td><p>function</p></td>
<td></td>
<td></td>
<td><p>当前是 tab 页时，点击 tab 时触发</p></td>
</tr>
</tbody>
</table>
<p>其他      any                     开发者可以添加任意的函数或数据到 Object 参数中，在页面的函数中用 this 可以访问</p>
<p>示例代码</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// index.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;This is page data.&#39;</span>
  <span class="p">},</span>
  <span class="nx">onLoad</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do some initialize when page load.</span>
  <span class="p">},</span>
  <span class="nx">onReady</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page ready.</span>
  <span class="p">},</span>
  <span class="nx">onShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page show.</span>
  <span class="p">},</span>
  <span class="nx">onHide</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page hide.</span>
  <span class="p">},</span>
  <span class="nx">onUnload</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page close.</span>
  <span class="p">},</span>
  <span class="nx">onPullDownRefresh</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when pull down.</span>
  <span class="p">},</span>
  <span class="nx">onReachBottom</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page reach bottom.</span>
  <span class="p">},</span>
  <span class="nx">onShareAppMessage</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// return custom share data when user share.</span>
  <span class="p">},</span>
  <span class="nx">onPageScroll</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page scroll</span>
  <span class="p">},</span>
  <span class="nx">onResize</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Do something when page resize</span>
  <span class="p">},</span>
  <span class="nx">onTabItemTap</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pagePath</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="c1">// Event handler.</span>
  <span class="nx">viewTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Set some data for updating view.&#39;</span>
    <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this is setData callback</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">customData</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">hi</span><span class="o">:</span> <span class="s1">&#39;MINA&#39;</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>data</p>
<p>data 是页面第一次渲染使用的初始数据。</p>
<p>页面加载时，data 将会以JSON字符串的形式由逻辑层传至渲染层，因此data中的数据必须是可以转成JSON的类型：字符串，数字，布尔值，对象，数组。</p>
<p>渲染层可以通过 WXML 对数据进行绑定。</p>
<p>示例代码：</p>
<p>在开发者工具中预览效果</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span>&lt;view&gt;{{text}}&lt;/view&gt;
&lt;view&gt;{{array[0].msg}}&lt;/view&gt;
Page({
  data: {
    text: &#39;init data&#39;,
    array: [{msg: &#39;1&#39;}, {msg: &#39;2&#39;}]
  }
})
</pre></div>
</div>
<p>生命周期回调函数</p>
<p>生命周期的触发以及页面的路由方式详见</p>
<p>onLoad(Object query)</p>
<p>页面加载时触发。一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数。</p>
<p>参数：</p>
<p>名称      类型      说明
query   Object  打开当前页面路径中的参数
onShow()
页面显示/切入前台时触发。</p>
<p>onReady()
页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。</p>
<p>注意：对界面内容进行设置的 API 如wx.setNavigationBarTitle，请在onReady之后进行。详见生命周期</p>
<p>onHide()
页面隐藏/切入后台时触发。 如 wx.navigateTo 或底部 tab 切换到其他页面，小程序切入后台等。</p>
<p>onUnload()
页面卸载时触发。如wx.redirectTo或wx.navigateBack到其他页面时。</p>
<p>页面事件处理函数
onPullDownRefresh()
监听用户下拉刷新事件。</p>
<p>需要在app.json的window选项中或页面配置中开启enablePullDownRefresh。
可以通过wx.startPullDownRefresh触发下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。
当处理完数据刷新后，wx.stopPullDownRefresh可以停止当前页面的下拉刷新。
onReachBottom()
监听用户上拉触底事件。</p>
<p>可以在app.json的window选项中或页面配置中设置触发距离onReachBottomDistance。
在触发距离内滑动期间，本事件只会被触发一次。
onPageScroll(Object object)
监听用户滑动页面事件。</p>
<p>参数 Object object:</p>
<p>属性      类型      说明
scrollTop       Number  页面在垂直方向已滚动的距离（单位px）</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>请只在需要的时候才在 page 中定义此方法，不要定义空方法。以减少不必要的事件派发对渲染层-逻辑层通信的影响。 注意：请避免在 onPageScroll 中过于频繁的执行 setData 等引起逻辑层-渲染层通信的操作。尤其是每次传输大量数据，会影响通信耗时。</p>
</div>
<p>onShareAppMessage(Object object)
监听用户点击页面内转发按钮（&lt;button&gt; 组件 open-type=”share”）或右上角菜单“转发”按钮的行为，并自定义转发内容。</p>
<p>注意：只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮</p>
<p>参数 Object object:</p>
<p>参数      类型      说明      最低版本
from    String  转发事件来源。
button：页面内转发按钮；
menu：右上角转发菜单    1.2.4
target  Object  如果 from 值是 button，则 target 是触发这次转发事件的 button，否则为 undefined      1.2.4
webViewUrl      String  页面中包含&lt;web-view&gt;组件时，返回当前&lt;web-view&gt;的url   1.6.4
此事件处理函数需要 return 一个 Object，用于自定义转发内容，返回内容如下：</p>
<p>自定义转发内容</p>
<p>字段      说明      默认值     最低版本
title   转发标题    当前小程序名称
path    转发路径    当前页面 path ，必须是以 / 开头的完整路径
imageUrl        自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径。支持PNG及JPG。显示图片长宽比是 5:4。       使用默认截图  1.5.0
示例代码</p>
<p>在开发者工具中预览效果</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onShareAppMessage</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">from</span> <span class="o">===</span> <span class="s1">&#39;button&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 来自页面内转发按钮</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;自定义转发标题&#39;</span><span class="p">,</span>
      <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/page/user?id=123&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>onResize(Object object)
基础库 2.4.0 开始支持，低版本需做兼容处理。</p>
<p>小程序屏幕旋转时触发。详见 响应显示区域变化</p>
<p>onTabItemTap(Object object)
基础库 1.9.0 开始支持，低版本需做兼容处理。</p>
<p>点击 tab 时触发</p>
<p>Object 参数说明：</p>
<p>参数      类型      说明      最低版本
index   String  被点击tabItem的序号，从0开始      1.9.0
pagePath        String  被点击tabItem的页面路径 1.9.0
text    String  被点击tabItem的按钮文字 1.9.0
示例代码：</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onTabItemTap</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pagePath</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>组件事件处理函数
Page 中还可以定义组件事件处理函数。在渲染层的组件中加入事件绑定，当事件被触发时，就会执行 Page 中定义的事件处理函数。</p>
<p>示例代码：</p>
<p>在开发者工具中预览效果</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">view</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;viewTap&quot;</span><span class="p">&gt;</span>click me<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">viewTap</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;view tap&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Page.route
基础库 1.2.0 开始支持，低版本需做兼容处理。</p>
<p>到当前页面的路径，类型为String。</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Page</span><span class="p">({</span>
  <span class="nx">onShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="nx">Page</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="nb">Object</span> <span class="nx">data</span><span class="p">,</span> <span class="nb">Function</span> <span class="nx">callback</span><span class="p">)</span>
</pre></div>
</div>
<p>setData 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 this.data 的值（同步）。</p>
<p>参数说明
字段      类型      必填      描述      最低版本
data    Object  是       这次要改变的数据
callback        Function        否       setData引起的界面更新渲染完毕后的回调函数        1.5.0
Object 以 key: value 的形式表示，将 this.data 中的 key 对应的值改变成 value。</p>
<p>其中 key 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如 array[2].message，a.b.c.d，并且不需要在 this.data 中预先定义。</p>
<p>注意：</p>
<p>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致。
仅支持设置可 JSON 化的数据。
单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。
请不要把 data 中任何一项的 value 设为 undefined ，否则这一项将不被设置并可能遗留一些潜在问题。
示例代码：</p>
<p>在开发者工具中预览效果</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!--index.wxml--&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeText&quot;</span><span class="p">&gt;</span>Change normal data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{num}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeNum&quot;</span><span class="p">&gt;</span>Change normal num<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{array[0].text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeItemInArray&quot;</span><span class="p">&gt;</span>Change Array data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{object.text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;changeItemInObject&quot;</span><span class="p">&gt;</span>Change Object data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>{{newField.text}}<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&quot;addNewField&quot;</span><span class="p">&gt;</span>Add new data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// index.js</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span><span class="p">,</span>
    <span class="nx">num</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">array</span><span class="o">:</span> <span class="p">[{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span><span class="p">}],</span>
    <span class="nx">object</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;init data&#39;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">changeText</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this.data.text = &#39;changed data&#39; // 不要直接修改 this.data</span>
    <span class="c1">// 应该使用 setData</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeNum</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 或者，可以修改 this.data 之后马上用 setData 设置一下修改了的字段</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">num</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="nx">num</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">num</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeItemInArray</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 对于对象或数组字段，可以直接修改一个其下的子字段，这样做通常比修改整个对象或数组更好</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;array[0].text&#39;</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">changeItemInObject</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;object.text&#39;</span><span class="o">:</span> <span class="s1">&#39;changed data&#39;</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">addNewField</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="s1">&#39;newField.text&#39;</span><span class="o">:</span> <span class="s1">&#39;new data&#39;</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="pageobject-getcurrentpages">
<h2>PageObject[] getCurrentPages()<a class="headerlink" href="#pageobject-getcurrentpages" title="永久链接至标题">¶</a></h2>
<p>获取当前页面栈。数组中第一个元素为首页，最后一个元素为当前页面。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>不要尝试修改页面栈，会导致路由以及页面状态错误。
不要在 App.onLaunch 的时候调用 getCurrentPages，此时 page 还没有生成。</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="module.html" class="btn btn-neutral float-right" title="模块" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="app.html" class="btn btn-neutral float-left" title="小程序 App" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Nosy

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>